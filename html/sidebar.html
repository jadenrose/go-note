{{block "sidebar" .}}
    <nav class="sidebar">
        <a class="logo" href="/">
            <img
                src="/img/logo.png"
                width="194"
                height="53"
                alt="GoNote (stylized Logo)"
            />
        </a>

        {{template "preview-links" .}}

        <button
            class="standard-button new-note"
            hx-get="/notes/new"
            hx-target="#note"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
            >
                <g fill="none" fill-rule="evenodd">
                    <path
                        d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"
                    />
                    <path
                        fill="currentColor"
                        d="M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4h4a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h4z"
                    />
                </g>
            </svg>
            add a new note
        </button>
    </nav>
{{end}}

{{block "preview-links" .}}
    <ul id="preview-links" class="preview-links">
        {{template "notes" .}}
    </ul>
{{end}}

{{block "preview" .}}
    <li id="preview-{{.ID}}" class="preview" hx-swap-oob="true">
        {{template "preview-controls" .}}
    </li>
{{end}}

{{block "preview-oob" .}}
    <li id="preview-{{.ID}}" class="preview" hx-swap-oob="true">
        {{template "preview-controls" .}}
    </li>
{{end}}

{{block "preview-more-options" .}}

{{end}}

{{block "notes" .}}
    {{range .}}
        {{template "preview" .}}
    {{end}}
{{end}}

{{block "insert-preview-oob" .}}
    <ul hx-swap-oob="afterbegin:#preview-links">
        {{template "preview" .}}
    </ul>
{{end}}

{{block "preview-controls" .}}
    <a
        class="preview-link standard-button"
        hx-get="/notes/{{.ID}}"
        hx-target="#note"
    >
        {{.Title}}
    </a>
    {{template "show-more-options" .}}
{{end}}

{{block "show-more-options" .}}
    <button
        title="More Options"
        id="preview-more-options-{{.ID}}"
        class="preview-more-options"
        hx-get="more-options/show?note_id={{.ID}}"
        hx-swap="outerHTML"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
        >
            <g fill="none">
                <path
                    d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"
                />
                <path
                    fill="currentColor"
                    d="M12 17a2 2 0 1 1 0 4a2 2 0 0 1 0-4m0-7a2 2 0 1 1 0 4a2 2 0 0 1 0-4m0-7a2 2 0 1 1 0 4a2 2 0 0 1 0-4"
                />
            </g>
        </svg>
    </button>
{{end}}

{{block "more-options" .}}
    <ul id="more-options-{{.ID}}" class="more-options">
        <li class="more-option">
            <button
                title="Delete Note"
                class="standard-button"
                hx-delete="/notes/{{.ID}}"
                hx-confirm="Are you sure? The note will be LOST FOREVER!"
                hx-swap="delete swap:0.4s"
                hx-target="#preview-{{.ID}}"
            >
                {{template "icon-trash"}}
            </button>
        </li>
        <li class="more-option">
            <button
                title="Cancel"
                hx-get="more-options/hide?note_id={{.ID}}"
                hx-swap="outerHTML swap:0.2s"
                hx-target="#more-options-{{.ID}}"
                class="standard-button"
            >
                {{template "icon-cancel"}}
            </button>
        </li>
    </ul>
{{end}}
